<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-markdown>
					<script type="text/template">
						# Workshop Kafka

						> Arquitecturas dirigidas a eventos usando Kafka

						#### **MÓDULO 3:** Tópicos, particiones, Brokers

						* Basado en [Understanding Kafka Topic Partitions](https://medium.com/event-driven-utopia/understanding-kafka-topic-partitions-ae40f80552e8)

					</script>
				</section>

				<section>
					<section data-markdown>
						<script type="text/template">
							### Tópicos

							> Los eventos están organizados y almacenados en forma duradera en tópicos. Los Tópicos
							puede ser escritos y leídos por múltiples producers y consumers. 
						</script>
					</section>
					<section data-markdown>
						<script type="text/template">
							> Los eventos no son eliminados después de ser consumidos y pueden ser retenidos
							sin impacto en el desempeño , tanto como se requiera. 
							Pueden ser léidos en cualquier momento.
						</script>
					</section>
				</section>
				<section>
					<section data-markdown>
						<script type="text/template">
							### Particiones

							> Los tópicos son particionados en buckets localizados en diferente brokers. eventos
							como la misma llave son escritos en la misma partición y Kafka garantiza que cualquier 
							consumidor leyendo una partición, va a leer lso eventos en exactamente el mismo orden.
						</script>
					</section>
				</section>
				<section>
					<section data-markdown>
						<script type="text/template">
							![kafka-topic-parition](imgs/kafka-topic-parition.png)
						</script>
					</section>
				</section>
				<section>
					<section data-markdown>
						<script type="text/template">
							Cada partición es un archivo de log simple escrito con **"append"**

							![kafka-parittion](imgs/kafka-partition.png)
						</script>
					</section>
				</section>
				<section>
					<section data-markdown>
						<script type="text/template">
							A cada evento se le asigna un número correlativo dentro de la partición único e inmutable.
							
							![kafka-offset](imgs/kafka-offsets.png)
						</script>
					</section>
				</section>
				<section>
					<section data-markdown>
						<script type="text/template">
							> Kafka no garantiza orden y unicidad entre particiones.
						</script>
					</section>
				</section>
				<section>
					<section data-markdown>
						<script type="text/template">
							### Replicas

							> Para permitir tolerancia a fallos y alta disponibilidad, cada tópico
							puede ser replicado, incluso a través de regiones y data-centers (Confluent).
							La selección mas común de replicas es 3, y significa que Kafka garantiza que 3
							brokers independientes tiene copia de la partición. 
						</script>
					</section>
				</section>
				<section>
					<section data-markdown>
						<script type="text/template">
							### Líder

							> Kafka genera un líder de partición usando consenso distribuido. EL resto de los brokers
							actúan como seguidores.
						</script>
					</section>
				</section>
				<section>
					<section data-markdown>
						<script type="text/template">
							### ACK

							- ack=0: Kafka recibe el mensaje y no espera confirmación
							- ack=1: Al menos el leader a confirmado el evento
							- ack=2: Kafka considera que un evento está confirmado cuando todas las réplicas confirman
							el almacenamiento del evento.
						</script>
					</section>
				</section>
				<section>
					<section data-markdown>
						<script type="text/template">
							### In Sync Replica (ISR)

							> Balance entre seguridad y disponibilidad/latencia. Define el número mínimo de seguidores
							que deben estar sincronizados con el líder. 
						</script>
					</section>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
